{% extends '::base.html.twig' %}
{% block iconHead %}
    <i class="gi gi-pencil"></i>
{% endblock iconHead %}

{% block pageTitle %}
    Cotizador
{% endblock pageTitle %}
{% block subtitle %}
    Flexible
{% endblock subtitle %}

{% block action %}
    <div class="block-options pull-right">
        <a data-original-title="Regresar" href="{{ url('cotizador_flexible_index') }}" class="btn btn-alt btn-sm btn-default" data-toggle="tooltip" title=""><i class="fa fa-chevron-left"></i></a>
    </div>
{% endblock action %}

{% block titlePanel %}
    Nuevo
{% endblock titlePanel %}

{% block bodyPanel %}

    {{ form_start(form) }}
    {{ form_errors(form) }}
    {{ form_row(form.country) }}
    {{ form_row(form.city) }}
    {{ form_row(form.headquarter) }}
    {{ form_row(form.client) }}
    {{ form_row(form.seller) }}
    {{ form_row(form.lodging) }}
    {{ form_row(form.service) }}
    {{ form_row(form.optionalService) }}
    {{ form_row(form.course) }}
    {{ form_row(form.exam) }}
    {{ form_row(form.semanas) }}
    {{ form_row(form.note) }}
    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            <button type="submit" class="btn btn-sm btn-primary"><i class="fa fa-angle-right"></i> Guardar</button>
        </div>
    </div>
    {{ form_end(form) }}
    <br/>
{% endblock bodyPanel %}
{% block extraJS %}
    <script type="text/javascript">
        $(".country_selector").change(function(){
            var data = {
                countryId: $(this).val()
            };

            $.ajax({
                type: 'post',
                url: '{{ path("select_cities") }}',
                data: data,
                success: function(data) {
                    var $city_selector = $('.city_selector');

                    $city_selector.html('<option>City</option>');

                    for (var i=0, total = data.length; i < total; i++) {
                        $city_selector.append('<option value="' + data[i].id + '">' + data[i].name + '</option>');
                    }
                }
            });
        });
    </script>
{% endblock extraJS %}